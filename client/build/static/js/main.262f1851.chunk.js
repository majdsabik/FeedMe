(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{186:function(e,t,a){e.exports=a.p+"static/media/Landing.605377a8.png"},187:function(e,t,a){e.exports=a(412)},192:function(e,t,a){},193:function(e,t,a){},412:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(35),c=a.n(l),s=a(11),o=(a(192),a(6)),i=a(8),u=a(7),m=(a(193),a(23)),d=a.n(m),h=function(e,t){return d.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},p=a(36),g=a(10),E=a(415),f=a(417),b=a(414),v=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",message:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;h(n,r).then((function(t){t.message?e.setState({message:t.message,username:"",password:""}):(e.props.setUser(t),e.props.history.push("/menu"))}))},e}return Object(g.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Login"),r.a.createElement(E.a,{onSubmit:this.handleSubmit},r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,{htmlFor:"username"},"E-Mail: "),r.a.createElement(E.a.Control,{type:"text",name:"username",value:this.state.email,onChange:this.handleChange,id:"username"})),r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,{htmlFor:"password"},"Password: "),r.a.createElement(E.a.Control,{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"})),this.state.message&&r.a.createElement(f.a,{variant:"danger"},this.state.message),r.a.createElement(b.a,{type:"submit"},"Login")))}}]),a}(n.Component),y=a(49),O=a.n(y),N=a(82),C=a(81);function j(e){var t,a;function l(e,a){(t=new window.google.maps.places.Autocomplete(a.current)).addListener("place_changed",(function(){return function(e){return c.apply(this,arguments)}(e)}))}function c(){return(c=Object(C.a)(O.a.mark((function n(r){var l,c,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l=t.getPlace(),c=l.formatted_address,s=l.place_id,r(c),a=c,e.updateAddress(a,s);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var s=Object(n.useState)(""),o=Object(N.a)(s,2),i=o[0],u=o[1],m=Object(n.useRef)(null);return Object(n.useEffect)((function(){!function(e,t){var a=document.createElement("script");a.type="text/javascript",a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,t())}:a.onload=function(){return t()},a.src=e,document.getElementsByTagName("head")[0].appendChild(a)}("https://maps.googleapis.com/maps/api/js?key=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GOOGLE_API_KEY,"&libraries=places"),(function(){return l(u,m)}))}),[]),r.a.createElement("div",{className:"search-location-input"},r.a.createElement("input",{ref:m,onChange:function(e){return u(e.target.value)},placeholder:"Enter your address",value:i,className:"form-control"}))}var S=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={firstName:"",lastName:"",email:"",password:"",address:"",placeId:"",message:""},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state;(function(e,t,a,n,r,l){return d.a.post("/api/auth/signup",{firstName:e,lastName:t,email:a,password:n,address:r,placeId:l}).then((function(e){return e.data})).catch((function(e){return e.response.data}))})(t.firstName,t.lastName,t.email,t.password,t.address,t.placeId).then((function(e){e.message?n.setState({message:e.message,firstName:"",lastName:"",email:"",password:"",address:"",placeId:""}):(n.props.setUser(e),n.props.history.push("/menu"))}))},n.updateAddress=function(e,t){n.setState({address:e,placeId:t})},n}return Object(g.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Signup"),r.a.createElement(E.a,{onSubmit:this.handleSubmit},r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,{htmlFor:"firstName"},"First name: "),r.a.createElement(E.a.Control,{type:"text",id:"firstName",name:"firstName",value:this.state.firstName,onChange:this.handleChange})),r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,{htmlFor:"lastName"},"Last Name: "),r.a.createElement(E.a.Control,{type:"text",id:"lastName",name:"lastName",value:this.state.lastName,onChange:this.handleChange})),r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,{htmlFor:"email"},"E-Mail: "),r.a.createElement(E.a.Control,{type:"text",id:"email",name:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,{htmlFor:"password"},"Password: "),r.a.createElement(E.a.Control,{type:"password",id:"password",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,null,"Address:"),r.a.createElement(j,{place_id:this.place_id,onChange:function(){return null},value:this.state.address,updateAddress:this.updateAddress})),this.state.message&&r.a.createElement(f.a,{variant:"danger"},this.state.message),r.a.createElement(b.a,{type:"submit"},"Signup")))}}]),a}(n.Component),w=a(9),x=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){return n.setState(Object(p.a)({},e.target.name,e.target.value))},n.addToCart=function(){var e=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):{},t=n.props.menuItem.itemNo;e[t]=e[t]?e[t]:0;var a=e[t]+parseInt(n.state.quantity);e[t]=a,localStorage.setItem("cart",JSON.stringify(e))},n.state={quantity:1},n}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.menuItem;return r.a.createElement("div",{className:"card",style:{marginBottom:"10px"},key:e._id},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},e.name),r.a.createElement("p",{className:"card-text"},e.description),r.a.createElement("h5",{className:"card-text"},r.a.createElement("small",null,"price: "),"$",e.price),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-sm btn-warning float-right",onClick:this.addToCart},"Add to cart"),r.a.createElement("input",{type:"number",value:this.state.quantity,name:"quantity",onChange:this.handleInputChange,className:"float-right",style:{width:"60px",marginRight:"10px",borderRadius:"3px"}}))))}}]),a}(r.a.Component);function k(e){return d.a.post("/api/cart",{cart:e}).then((function(e){return e.data})).catch((function(e){console.log(e)}))}var I=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={menu:[]},n}return Object(g.a)(a,[{key:"componentWillMount",value:function(){var e=this;d.a.get("/api/menu").then((function(e){return e.data})).then((function(t){e.setState({menu:t})}))}},{key:"render",value:function(){var e=this.state.menu;return r.a.createElement("div",{className:" container"},r.a.createElement("h3",{className:"card-title"},"List of Available Products"),r.a.createElement("hr",null),e.map((function(e){return r.a.createElement(x,{menuItem:e})})),r.a.createElement("hr",null),r.a.createElement(s.b,{to:"/checkout"},r.a.createElement("button",{className:"btn btn-success float-right"},"Checkout")),r.a.createElement(s.b,{to:"/cart"},r.a.createElement("button",{className:"btn btn-primary float-right",style:{marginRight:"10px"}},"View Cart")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(r.a.Component),_=a(38),A=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={quantity:1},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props.menuItem;return r.a.createElement("div",{className:"card",style:{marginBottom:"10px"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},t.name),r.a.createElement("h5",{className:"card-text"},r.a.createElement("small",null,"price: "),"$",t.price),r.a.createElement("span",{className:"card-text text-success"},r.a.createElement("small",null,"Quantity: "),t.qty),r.a.createElement("button",{className:"btn btn-sm btn-warning float-right",onClick:function(){return e.props.remove(t)}},"Remove from cart")))}}]),a}(r.a.Component),T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).removeFromCart=function(e){var t=n.state.menu.filter((function(t){return t.itemNo!==e.itemNo})),a=JSON.parse(localStorage.getItem("cart"));delete a[e.itemNo],localStorage.setItem("cart",JSON.stringify(a));var r=n.state.total-e.qty*e.price;n.setState({menu:t,total:r})},n.clearCart=function(){localStorage.removeItem("cart"),n.setState({menu:[]})},n.state={menu:[],total:0},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("cart");t&&k(t).then((function(a){var n=JSON.parse(t),r=a.map((function(e){return Object(_.a)(Object(_.a)({},e),{},{qty:n[e.itemNo]})})),l=r.reduce((function(e,t){return e+t.qty*t.price}),0);e.setState({menu:r,total:l})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.menu,n=t.total;return r.a.createElement("div",{className:" container"},r.a.createElement("h3",{className:"card-title"},"Cart"),r.a.createElement("hr",null),a.map((function(t,a){return r.a.createElement(A,{menuItem:t,remove:e.removeFromCart,key:a})})),r.a.createElement("hr",null),a.length?r.a.createElement("div",null,r.a.createElement("h4",null,r.a.createElement("small",null,"Total Amount:"),r.a.createElement("span",{className:"float-right text-primary"},"$",n)),r.a.createElement("hr",null)):"",a.length?"":r.a.createElement("h3",{className:"text-warning"},"No item on the cart"),r.a.createElement(s.b,{to:{pathname:"/checkout",query:Object(_.a)({},this.state.menu)}},r.a.createElement("button",{className:"btn btn-success float-right"},"Checkout")),r.a.createElement(s.b,{to:{pathname:"/menu",query:Object(_.a)({},this.state.menu)}},r.a.createElement("button",{className:"btn btn-success float-right"},"Back to menu")),r.a.createElement("button",{className:"btn btn-danger float-right",onClick:this.clearCart,style:{marginRight:"10px"}},"Clear Cart"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(r.a.Component),q=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).updateAddress=function(e,t){n.setState({deliveryAddress:e,place_id:t})},n.state={menu:[],total:0,deliveryAddress:n.props.address,address:n.props.user.address},n}return Object(g.a)(a,[{key:"checkout",value:function(){var e=this;(function(e,t,a,n){return d.a.post("/api/cart/order",{order:e,total:t,deliveryAddress:a,place_id:n}).then((function(e){return e.data})).catch((function(e){console.log(e)}))})(this.state.menu,this.state.total,this.state.deliveryAddress,this.state.place_id).then((function(t){e.props.history.push("/success"),localStorage.removeItem("cart")})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("cart");t&&k(t).then((function(a){var n=JSON.parse(t),r=a.map((function(e){return Object(_.a)(Object(_.a)({},e),{},{qty:n[e.itemNo]})})),l=r.reduce((function(e,t){return e+t.qty*t.price}),0);e.setState({menu:r,total:l})}))}},{key:"render",value:function(){var e=this;if(!this.props.user)return r.a.createElement(w.a,{to:"/login"});var t=this.state,a=t.menu,n=t.total;return r.a.createElement("div",{className:" container"},r.a.createElement("h3",{className:"card-title"},"Checkout"),r.a.createElement("hr",null),a.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,e.name,r.a.createElement("small",null," (quantity: ",e.qty,")"),r.a.createElement("span",{className:"float-right text-primary"},"$",e.qty*e.price)),r.a.createElement("hr",null))})),r.a.createElement("hr",null),a.length?r.a.createElement("div",null,r.a.createElement("h4",null,r.a.createElement("small",null,"Total Amount:"),r.a.createElement("span",{className:"float-right text-primary"},"$",n)),r.a.createElement("hr",null)):"",a.length?r.a.createElement("div",null,r.a.createElement("h4",null,"The delivery address is ",this.props.user.address," , if you need to change the address , please select the address below:"),r.a.createElement(j,{place_id:this.place_id,onChange:function(){return null},value:this.state.address,updateAddress:this.updateAddress})):"",a.length?"":r.a.createElement("h3",{className:"text-warning"},"No item on the cart"),a.length?r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-success float-right",onClick:function(){return e.checkout()}},"Confirm")):"",r.a.createElement(s.b,{to:"/menu"},r.a.createElement("button",{className:"btn btn-success float-right",style:{marginRight:"10px"}},"Back to menu")),r.a.createElement(s.b,{to:"/cart"},r.a.createElement("button",{className:"btn btn-danger float-right",style:{marginRight:"10px"}},"Cancel")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(r.a.Component);var L=a(416),D=function(e){d.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){e.setUser(null)}))};function R(e){return r.a.createElement(L.a,{className:"nav justify-content-end",bg:"primary"},e.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a.Brand,null,r.a.createElement(s.b,{to:"/",onClick:function(){return D(e)}},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a.Brand,null,r.a.createElement(s.b,{to:"/signup"},"Signup")),r.a.createElement(L.a.Brand,null,r.a.createElement(s.b,{to:"/login"},"Login"))))}var P=a(50),M=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={directions:null},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;(new google.maps.DirectionsService).route({origin:{placeId:"ChIJPZnsYhtOqEcRncTWrtTqxrk"},destination:{placeId:"ChIJmZqwxclRqEcRzqol8Xtbz7A"},travelMode:google.maps.TravelMode.DRIVING},(function(t,a){a===google.maps.DirectionsStatus.OK?e.setState({directions:t}):console.error("error fetching directions ".concat(t))})),this.calculateDeliveryTime()}},{key:"calculateDeliveryTime",value:function(){(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[{placeId:"ChIJPZnsYhtOqEcRncTWrtTqxrk"}],destinations:[{placeId:"ChIJmZqwxclRqEcRzqol8Xtbz7A"}],travelMode:"BICYCLING",drivingOptions:{departureTime:new Date(Date.now()+100),trafficModel:"pessimistic"}},(function(e,t){if("OK"===t)for(var a=e.originAddresses,n=e.destinationAddresses,r=0;r<a.length;r++)for(var l=e.rows[r].elements,c=0;c<l.length;c++){var s=l[c],o=s.distance.text,i=s.duration.text,u=a[r],m=n[c];console.log("distance: "+o),console.log("duration: "+i),console.log("from: "+u),console.log("to: "+m)}}))}},{key:"render",value:function(){var e=this,t=Object(P.withGoogleMap)((function(t){return r.a.createElement(P.GoogleMap,{defaultCenter:{lat:52.52,lng:13.41},defaultZoom:13},r.a.createElement(P.DirectionsRenderer,{directions:e.state.directions}))}));return r.a.createElement("div",null,r.a.createElement(t,{containerElement:r.a.createElement("div",{style:{height:"500px",width:"500px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}))}}]),a}(n.Component),U=function(){var e=Object(P.withScriptjs)(M);return r.a.createElement(e,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GOOGLE_API_KEY),loadingElement:r.a.createElement("div",{style:{height:"100%"}})})},F=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(g.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement("h1",null,"Thanks for placing the Order!! Your order number is \xa0",this.props.user.orders[this.props.user.orders.length-1],"!!"),r.a.createElement("h2",null,"The order will be delivered in approximately bla bla time !"))}}]),a}(n.Component),G=a(186),B=a.n(G),J=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"display-2 text-center"},"Welcome to FeedMe"),r.a.createElement("div",{className:"text-left d-sm-flex align-items-sm-center align-items-lg-center"},r.a.createElement("img",{src:B.a,width:"55%"}),r.a.createElement("div",{className:"text-center d-lg-flex flex-column justify-content-lg-end align-items-lg-center"},r.a.createElement("h3",null,"Login or Signup to explore the menu and place your order"),r.a.createElement(s.b,{to:"/menu"},r.a.createElement("button",{className:"btn btn-primary text-center",type:"button"},"Menu")))))}}]),a}(n.Component),W=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={user:e.props.user,message:"",order:""},e.setUser=function(t){e.setState({user:t})},e.render=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(R,{user:e.state.user,setUser:e.setUser}),r.a.createElement(w.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(J,Object.assign({setUser:e.setUser,user:e.state.user},t))}}),r.a.createElement(w.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(S,Object.assign({setUser:e.setUser},t))}}),r.a.createElement(w.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(v,Object.assign({setUser:e.setUser},t))}}),r.a.createElement(w.b,{exact:!0,path:"/menu",component:I}),r.a.createElement(w.b,{exact:!0,path:"/cart",component:T}),r.a.createElement(w.b,{exact:!0,path:"/checkout",render:function(t){return r.a.createElement(q,Object.assign({user:e.state.user,order:e.state.order},t))}}),r.a.createElement(w.b,{exact:!0,path:"/success",render:function(t){return r.a.createElement(F,Object.assign({user:e.state.user},t))}}))},e}return a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.get("/api/auth/loggedin").then((function(e){var t=e.data;c.a.render(r.a.createElement(s.a,null,r.a.createElement(W,{user:t})),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[187,1,2]]]);
//# sourceMappingURL=main.262f1851.chunk.js.map